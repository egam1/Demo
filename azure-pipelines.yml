# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'windows-latest'

steps:
- script: 'echo %cd%'
  displayName: 'Run first cmd'

- script: |
    echo start of wait
    timeout /T 5
    echo completed wait
    dir
    echo %cd%
    dir foo.txt /s
    echo $(Build.Repository.LocalPath)
    echo $(Build.SourcesDirectory)
    echo $(System.DefaultWorkingDirectory)
  failOnStderr: false

#     azureSubscription: 'Free Trial (e60e4250-e749-4da3-a098-04df412b24c5)'
- task: Docker@2
  inputs:
    azureSubscription: 'Free Trial (e60e4250-e749-4da3-a098-04df412b24c5)'
    repository: 'egam1/demo'
    command: 'buildAndPush'
    Dockerfile: '**/Dockerfile'